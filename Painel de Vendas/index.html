<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <title>Vendas | RuaRoma Sunset</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root{
            --brand-red:#E63A2E;
            --brand-green:#197a3b;
            --bg-left:#071e26;
            --bg-right:#0f3a45;
            --card-bg: rgba(0,0,0,0.6);
            --muted:#cfdde6;
            --text:#ffffff;
        }

        html,body{height:100%;margin:0;}
        body{
            display:flex;
            align-items:center;
            justify-content:center;
            padding:32px;
            background-image: linear-gradient(90deg,var(--bg-left),var(--bg-right));
            font-family: "Inter", Arial, Helvetica, sans-serif;
            -webkit-font-smoothing:antialiased;
        }

        .box{
            width:360px;
            max-width:calc(100% - 48px);
            background:var(--card-bg);
            border-radius:15px;
            padding:18px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.6);
            color:var(--text);
        }

        .brand{
            display:flex;
            align-items:center;
            justify-content:center;
            gap:10px;
            margin-bottom:12px;
        }
        .brand img{
            max-width:220px;
            height:auto;
            display:block;
        }
        #brand-text{
            display:none;
            font-family:"Pacifico",cursive;
            color:var(--brand-red);
            font-size:20px;
        }

        /* ajuste pequena do label/valor */
        .labelInput.staticLabel{ display:block; margin-bottom:6px; color:var(--muted); }
        .valor-input{ text-align:right; font-size:18px; padding:8px 10px; width:100%; box-sizing:border-box; }

        body{
            font-family: Arial, Helvetica, sans-serif;
            background-image: linear-gradient(to right, rgb(20, 147, 220), rgb(17, 54, 71));
        }
        .box{
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            background-color: rgba(0, 0, 0, 0.6);
            padding: 15px;
            border-radius: 15px;
            width: 20%;
        }
        fieldset{
            border: 3px solid dodgerblue;
        }
        legend{
            border: 1px solid dodgerblue;
            padding: 10px;
            text-align: center;
            background-color: dodgerblue;
            border-radius: 8px;
        }
        .inputBox{
            position: relative;
        }
        .inputUser{
            background: none;
            border: none;
            border-bottom: 1px solid white;
            outline: none;
            color: white;
            font-size: 15px;
            width: 100%;
            letter-spacing: 2px;
        }
        .inputUser[name="senha_pedido"] {
            text-align: center;
            font-size: 24px;
            letter-spacing: 2px;
        }
        .labelInput{
            position: absolute;
            top: 0px;
            left: 0px;
            pointer-events: none;
            transition: .5s;
        }
        .inputUser:focus ~ .labelInput,
        .inputUser:valid ~ .labelInput{
            top: -20px;
            font-size: 12px;
            color: dodgerblue;
        }
        #data_nascimento{
            border: none;
            padding: 8px;
            border-radius: 10px;
            outline: none;
            font-size: 15px;
        }
        #submit{
            background-image: linear-gradient(to right,rgb(0, 92, 197), rgb(90, 20, 220));
            width: 100%;
            border: none;
            padding: 15px;
            color: white;
            font-size: 15px;
            cursor: pointer;
            border-radius: 10px;
        }
        #submit:hover{
            background-image: linear-gradient(to right,rgb(0, 80, 172), rgb(80, 19, 195));
        }
        .pedido-item {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .qtd-input {
            width: 60px;
            padding: 5px;
            border-radius: 5px;
            border: 1px solid dodgerblue;
            background: transparent;
            color: white;
        }
        .botao-senha {
            background-image: linear-gradient(to right,rgb(0, 92, 197), rgb(90, 20, 220));
            border: none;
            padding: 10px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
            width: 100%;
        }

        .botao-senha:hover {
            background-image: linear-gradient(to right,rgb(0, 80, 172), rgb(80, 19, 195));
        }

        /* Centraliza painel na tela com padding seguro */
        html, body { height: 100%; box-sizing: border-box; }
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 32px;
            margin: 0;
            background-image: linear-gradient(90deg, var(--bg-left, #071e26), var(--bg-right, #0f3a45));
            font-family: "Inter", Arial, Helvetica, sans-serif;
        }

        /* Caixa do painel */
        .box{
            width: 360px;
            max-width: calc(100% - 48px);
            margin: 0 auto;
            border-radius: 15px;
            background: var(--card-bg, rgba(0,0,0,0.6));
            padding: 18px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.6);
        }

        /* logo / brand */
        .brand { display:flex; align-items:center; justify-content:center; margin-bottom:12px; gap:10px; }
        .brand img { max-width:220px; height:auto; display:block; }
        #brand-text { display:none; font-family: "Pacifico", cursive; color: var(--brand-red, #E63A2E); font-size:20px; }

        h2 { text-align:center; margin:8px 0 16px; }
        .categorias { display:flex; gap:12px; justify-content:center; margin-bottom:12px; }
        .categoria-btn{
            background: linear-gradient(180deg, var(--brand-red), #b83228);
            border: none;
            color: #fff;
            padding:12px;
            border-radius:8px;
            width:140px;
            height:96px;
            cursor:pointer;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            gap:6px;
        }
        .categoria-icone { font-size:34px; }
        form fieldset{ border:2px solid rgba(30,144,255,0.9); padding:12px; border-radius:8px; }
        legend{ background: var(--brand-red); color:white; font-family: "Pacifico", cursive; padding:6px 10px; border-radius:6px; }
        .pedido-item{ display:flex; align-items:center; gap:8px; margin:8px 0; }
        .qtd-input{ width:60px; padding:6px; border-radius:6px; border:1px solid #2ea3ff; background:transparent; color:white; }
        .inputBox{ position:relative; margin-top:8px; }
        .inputUser{ background:none; border:none; border-bottom:1px solid white; outline:none; color:white; padding:6px 4px; width:100%; }
        label.labelInput{ position:absolute; left:0; top:0; pointer-events:none; transition:.3s; color:#ccc; font-size:14px; }
        input.inputUser:focus + .labelInput,
        input.inputUser:not([value=""]) + .labelInput,
        input.inputUser:valid + .labelInput { top:-18px; font-size:12px; color:dodgerblue; }
        #valorTotalCompra { border:none; padding:8px; border-radius:6px; outline:none; font-size:16px; color:white; background:transparent; width:100%; }
        #submit-btn{ background-image: linear-gradient(90deg, var(--brand-red), #8f2b24); width:100%; border:none; padding:12px; color:white; font-size:16px; cursor:pointer; border-radius:8px; margin-top:8px;}
        #submit-btn:hover{ filter:brightness(.95); }
        .voltar-btn{ background: var(--brand-green); color:#fff; border:none; padding:6px 10px; border-radius:6px; cursor:pointer; margin-bottom:8px;}

        /* Estilo espec√≠fico para o label est√°tico do Valor Total */
        .labelInput.staticLabel {
            position: static;
            display: block;
            margin-bottom: 6px;
            color: #cfdde6;
            font-size: 13px;
        }

        /* Estilo do campo de valor total para melhor leitura */
        .valor-input {
            width: 100%;
            padding: 8px 10px;
            border-radius: 6px;
            border: 1px solid rgba(46,163,255,0.14);
            background: rgba(0,0,0,0.15);
            color: var(--text);
            font-size: 18px;
            text-align: right; /* ou "center" se preferir */
            box-sizing: border-box;
        }
        .valor-input[readonly] {
            cursor: default;
            opacity: 1;
        }

        /* destaque de foco */
        .qtd-input, .inputUser { border:1px solid rgba(46,163,255,0.1); }
        .inputUser:focus, .qtd-input:focus { box-shadow:0 0 0 3px rgba(46,163,255,0.08); border-color:var(--accent); outline:none; }
    </style>

    <!-- jsPDF (usado para gerar PDF no envio) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="box">
        <!-- logo / brand (coloque assets/logo.png) -->
        <div class="brand">
            <img src="assets/logo.png" alt="RuaRoma Logo"
                 onerror="this.style.display='none'; document.getElementById('brand-text').style.display='inline-block'">
            <span id="brand-text">Vendas RuaRoma Sunset</span>
        </div>

        <!-- Tela de Categorias -->
        <div id="tela-categorias">
            <h2>Escolha uma Categoria</h2>
            <div class="categorias">
                <button class="categoria-btn" type="button" onclick="mostrarCategoria('pizzas')">
                    <span class="categoria-icone">üçï</span>
                    <span>Pizzas</span>
                </button>
                <button class="categoria-btn" type="button" onclick="mostrarCategoria('bebidas')">
                    <span class="categoria-icone">üç∏</span>
                    <span>Bebidas</span>
                </button>
            </div>
        </div>

        <!-- Formul√°rio (escondido inicialmente) -->
        <form id="formulario-pedido" style="display:none;">
            <fieldset>
                <legend><b>Vendas RuaRoma Sunset</b></legend>

                <p style="margin:8px 0 4px;">Pedidos (selecione os itens desejados):</p>

                <!-- Pizzas -->
                <div class="pedido-item item-pizza" id="item-mussarela">
                    <input type="checkbox" id="mussarela" name="item_pedido" value="mussarela">
                    <label for="mussarela">Mussarela - R$25,00</label>
                    <input type="number" id="qtd_mussarela" class="qtd-input" value="0" min="0" max="99">
                </div>
                <div class="pedido-item item-pizza">
                    <input type="checkbox" id="calabresa" name="item_pedido" value="calabresa">
                    <label for="calabresa">Calabresa - R$20,00</label>
                    <input type="number" id="qtd_calabresa" class="qtd-input" value="0" min="0" max="99">
                </div>
                <div class="pedido-item item-pizza">
                    <input type="checkbox" id="pepperoni" name="item_pedido" value="pepperoni">
                    <label for="pepperoni">Pepperoni - R$30,00</label>
                    <input type="number" id="qtd_pepperoni" class="qtd-input" value="0" min="0" max="99">
                </div>
                <div class="pedido-item item-pizza">
                    <input type="checkbox" id="ragu_linguica" name="item_pedido" value="ragu_linguica">
                    <label for="ragu_linguica">Rag√∫ - R$35,00</label>
                    <input type="number" id="qtd_ragu_linguica" class="qtd-input" value="0" min="0" max="99">
                </div>
                <div class="pedido-item item-pizza">
                    <input type="checkbox" id="pannacotta" name="item_pedido" value="pannacotta">
                    <label for="pannacotta">Pannacotta - R$15,00</label>
                    <input type="number" id="qtd_pannacotta" class="qtd-input" value="0" min="0" max="99">
                </div>

                <!-- Bebidas -->
                <p style="margin-top:10px;">Bebidas:</p>
                <div class="pedido-item item-bebida">
                    <input type="checkbox" id="cuba" name="item_pedido" value="cuba">
                    <label for="cuba">Cuba - R$20,00</label>
                    <input type="number" id="qtd_cuba" class="qtd-input" value="0" min="0" max="99">
                </div>
                <div class="pedido-item item-bebida">
                    <input type="checkbox" id="caipirinha" name="item_pedido" value="caipirinha">
                    <label for="caipirinha">Caipirinha - R$20,00</label>
                    <input type="number" id="qtd_caipirinha" class="qtd-input" value="0" min="0" max="99">
                </div>
                <div class="pedido-item item-bebida">
                    <input type="checkbox" id="mojito" name="item_pedido" value="mojito">
                    <label for="mojito">Mojito - R$25,00</label>
                    <input type="number" id="qtd_mojito" class="qtd-input" value="0" min="0" max="99">
                </div>
                <div class="pedido-item item-bebida">
                    <input type="checkbox" id="ginpesto" name="item_pedido" value="ginpesto">
                    <label for="ginpesto">GinPesto - R$25,00</label>
                    <input type="number" id="qtd_ginpesto" class="qtd-input" value="0" min="0" max="99">
                </div>
                <div class="pedido-item item-bebida">
                    <input type="checkbox" id="refrigerante" name="item_pedido" value="refrigerante">
                    <label for="refrigerante">Refrigerante - R$8,00</label>
                    <input type="number" id="qtd_refrigerante" class="qtd-input" value="0" min="0" max="99">
                </div>
                <div class="pedido-item item-bebida">
                    <input type="checkbox" id="agua" name="item_pedido" value="agua">
                    <label for="agua">√Ågua - R$5,00</label>
                    <input type="number" id="qtd_agua" class="qtd-input" value="0" min="0" max="99">
                </div>

                <!-- Substitua esta se√ß√£o antiga do Valor Total (que tinha label sobreposto) por esta -->
                <div class="inputBox" style="margin-top:10px;">
                    <label for="valorTotalCompra" class="labelInput staticLabel">Valor Total da Compra (R$)</label>
                    <input type="text" id="valorTotalCompra" name="valorTotalCompra" class="valor-input" readonly value="0.00">
                </div>

                <div class="inputBox">
                    <input type="text" id="senha_pedido" name="senha_pedido" class="inputUser" maxlength="2" required>
                    <label for="senha_pedido" class="labelInput">Senha do Pedido</label>
                </div>

                <div style="display:flex; gap:8px; margin-top:10px;">
                    <button type="button" class="voltar-btn" onclick="voltarCategorias()">Voltar para Categorias</button>
                    <button id="submit-btn" type="submit">Enviar</button>
                </div>
            </fieldset>
        </form>
    </div>

    <script>
    // scripts: categorias, pre√ßos, c√°lculo e gera√ß√£o de PDF ao submit
    document.addEventListener('DOMContentLoaded', () => {
        // pre√ßos
        window.precosItens = {
            mussarela:25.00, calabresa:20.00, pepperoni:30.00, ragu_linguica:35.00, pannacotta:15.00,
            cuba:20.00, caipirinha:20.00, mojito:25.00, ginpesto:25.00, refrigerante:8.00, agua:5.00
        };

        // mostrar/esconder categorias e itens
        window.mostrarCategoria = function(categoria){
            document.getElementById('tela-categorias').style.display = 'none';
            document.getElementById('formulario-pedido').style.display = 'block';
            // mostra somente itens da categoria selecionada
            document.querySelectorAll('.item-pizza').forEach(el => el.style.display = categoria === 'pizzas' ? 'flex' : 'none');
            document.querySelectorAll('.item-bebida').forEach(el => el.style.display = categoria === 'bebidas' ? 'flex' : 'none');
        };
        window.voltarCategorias = function(){
            document.getElementById('tela-categorias').style.display = 'block';
            document.getElementById('formulario-pedido').style.display = 'none';
        };

        // c√°lculo autom√°tico
        const inputValorTotal = document.getElementById('valorTotalCompra');

        function atualizarValorTotal(){
            const checkboxes = document.querySelectorAll('input[name="item_pedido"]');
            let total = 0;
            checkboxes.forEach(cb => {
                const key = cb.value;
                const qtdEl = document.getElementById('qtd_' + key);
                const qtd = qtdEl ? parseInt(qtdEl.value, 10) || 0 : 0;
                if (qtd > 0) cb.checked = true;
                if (!cb.checked) return;
                const preco = Number(window.precosItens[key] || 0);
                total += preco * qtd;
            });
            inputValorTotal.value = total.toFixed(2);
        }

        // ouvintes
        document.querySelectorAll('input[name="item_pedido"]').forEach(cb => {
            cb.addEventListener('change', () => {
                const key = cb.value;
                const qtdEl = document.getElementById('qtd_' + key);
                if (cb.checked && qtdEl && (qtdEl.value === '' || Number(qtdEl.value) === 0)) qtdEl.value = 1;
                if (!cb.checked && qtdEl) qtdEl.value = 0;
                atualizarValorTotal();
            });
        });
        document.querySelectorAll('.qtd-input').forEach(q => {
            q.addEventListener('input', () => {
                const key = q.id.replace(/^qtd_/, '');
                const cb = document.querySelector('input[name="item_pedido"][value="'+key+'"]');
                const val = parseInt(q.value, 10) || 0;
                if (cb) cb.checked = val > 0;
                atualizarValorTotal();
            });
        });

    // c√°lculo inicial
    atualizarValorTotal();
});
    </script>
    <script>
        // Gerar senha aleat√≥ria para o pedido
        function gerarSenha(length) {
            const charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
            let senha = "";
            for (let i = 0; i < length; i++) {
                const randomIndex = Math.floor(Math.random() * charset.length);
                senha += charset[randomIndex];
            }
            return senha;
        }

        function gerarSenhaAleatoria() {
            const min = 1;
            const max = 12;
            const senha = Math.floor(Math.random() * (max - min + 1)) + min;
            return senha.toString(); // Retorna apenas o n√∫mero sem formata√ß√£o
        }

        document.getElementById('gerarSenha').addEventListener('click', function() {
            const novaSenha = gerarSenha(8);
            document.getElementById('senha_pedido').value = novaSenha;
        });

        document.addEventListener('DOMContentLoaded', function() {
            const inputSenha = document.getElementById('senha_pedido');
            const labelSenha = document.querySelector(`label[for="senha_pedido"]`);
            
            // Define valor inicial
            inputSenha.value = gerarSenhaAleatoria();
            
            // Posiciona a label permanentemente acima
            labelSenha.style.top = '-20px';
            labelSenha.style.fontSize = '12px';
            labelSenha.style.color = 'dodgerblue';
        });

        // Fun√ß√£o para mostrar a categoria selecionada
        function mostrarCategoria(categoria) {
            const telaCategorias = document.getElementById('tela-categorias');
            const formularioPedido = document.getElementById('formulario-pedido');
            const voltarBtn = document.querySelector('.voltar-btn');
            
            // Esconde os bot√µes de categoria e mostra o formul√°rio
            telaCategorias.querySelector('.categorias').style.display = 'none';
            formularioPedido.style.display = 'block';
            voltarBtn.style.display = 'block';

            // Mostra/esconde itens baseado na categoria
            const itensPizza = document.querySelectorAll('.item-pizza');
            const itensBebida = document.querySelectorAll('.item-bebida');

            if (categoria === 'pizzas') {
                itensPizza.forEach(item => item.style.display = 'block');
                itensBebida.forEach(item => item.style.display = 'none');
            } else {
                itensPizza.forEach(item => item.style.display = 'none');
                itensBebida.forEach(item => item.style.display = 'block');
            }
        }

        // Fun√ß√£o para voltar √† tela de categorias
        function voltarCategorias() {
            const telaCategorias = document.getElementById('tela-categorias');
            const formularioPedido = document.getElementById('formulario-pedido');
            const voltarBtn = document.querySelector('.voltar-btn');

            telaCategorias.querySelector('.categorias').style.display = 'flex';
            formularioPedido.style.display = 'none';
            voltarBtn.style.display = 'none';
        }

        document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('formulario-pedido');
    if (!form) {
        console.error('Formul√°rio n√£o encontrado: id="formulario-pedido"');
        return;
    }

    form.addEventListener('submit', (e) => {
        e.preventDefault();

        // checa jsPDF
        const jsPDFLib = (window.jspdf && window.jspdf.jsPDF) || window.jsPDF;
        if (!jsPDFLib) {
            console.error('jsPDF n√£o encontrado. Verifique inclus√£o do CDN no <head>.');
            alert('Erro: jsPDF n√£o carregado. Abra o console (F12) para detalhes.');
            return;
        }

        try {
            // obt√©m valores com checagem segura
            const getVal = id => document.getElementById(id)?.value ?? '';
            const nome = getVal('nome');
            const telefone = getVal('telefone');
            const endereco = getVal('endereco');
            const cidade = getVal('cidade');
            const senha = getVal('senha_pedido');
            const valorTotal = getVal('valorTotalCompra') || '0.00';

            // coleta itens selecionados de forma segura
            const precos = window.precosItens || {};
            const checked = Array.from(document.querySelectorAll('input[name="item_pedido"]:checked'));
            const itens = checked.map(cb => {
                const qtd = parseInt(document.getElementById(`qtd_${cb.value}`)?.value || '0', 10) || 0;
                const preco = typeof precos[cb.value] === 'number' ? precos[cb.value] : 0;
                const label = document.querySelector(`label[for="${cb.id}"]`);
                const nomeItem = label ? label.textContent.split('-')[0].trim() : cb.value;
                return { chave: cb.value, nome: nomeItem, qtd, preco, total: (qtd * preco) };
            });

            // gera PDF
            const doc = new jsPDFLib();
            doc.setFont('helvetica');
            doc.setFontSize(16);
            doc.text('RuaRoma Sunset - Comprovante de Pedido', 20, 20);
            doc.setFontSize(12);

            let y = 40;
            if (nome) { doc.text(`Nome: ${nome}`, 20, y); y += 8; }
            if (telefone) { doc.text(`Telefone: ${telefone}`, 20, y); y += 8; }
            if (endereco) { doc.text(`Endere√ßo: ${endereco}`, 20, y); y += 8; }
            if (cidade) { doc.text(`Cidade: ${cidade}`, 20, y); y += 8; }
            if (senha) { doc.text(`Senha do Pedido: ${senha}`, 20, y); y += 10; }

            doc.text('Itens do Pedido:', 20, y); y += 8;
            if (itens.length === 0) {
                doc.text('(Nenhum item selecionado)', 20, y); y += 8;
            } else {
                itens.forEach(it => {
                    doc.text(`${it.nome} - Qtd: ${it.qtd} - R$ ${it.total.toFixed(2)}`, 20, y);
                    y += 8;
                    if (y > 270) { doc.addPage(); y = 20; }
                });
            }

            doc.setFontSize(14);
            doc.text(`Valor Total: R$ ${valorTotal}`, 20, y + 12);
            doc.setFontSize(10);
            doc.text(`Emitido em: ${new Date().toLocaleString('pt-BR')}`, 20, y + 28);

            const filename = `pedido-${senha || Date.now()}.pdf`;
            doc.save(filename);

            console.log('PDF gerado:', filename);
            alert('Pedido realizado com sucesso! O comprovante foi baixado.');
            // form.reset(); // opcional
        } catch (err) {
            console.error('Erro ao gerar PDF:', err);
            alert('Erro ao gerar PDF. Veja o console (F12) para detalhes.');
        }
    });
});
    </script>
<<<<<<< Updated upstream
=======
    <script>
document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('formulario-pedido');
    if (!form) return;

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        const jsPDFLib = (window.jspdf && window.jspdf.jsPDF) || window.jsPDF;
        if (!jsPDFLib) {
            alert('Erro: jsPDF n√£o carregado.');
            return;
        }

        const senha = document.getElementById('senha_pedido')?.value || Date.now().toString();

        // coleta itens com quantidade > 0 (cada unidade vira uma p√°gina)
        const itensSelecionados = Array.from(document.querySelectorAll('input[name="item_pedido"]'))
            .map(cb => {
                const key = cb.value;
                const qtd = parseInt(document.getElementById('qtd_' + key)?.value || '0', 10) || 0;
                const label = document.querySelector('label[for="'+cb.id+'"]');
                const nomeItem = label ? label.textContent.split('-')[0].trim() : key;
                return { key, nomeItem, qtd };
            })
            .filter(it => it.qtd > 0);

        if (itensSelecionados.length === 0) {
            alert('Nenhum item com quantidade selecionada.');
            return;
        }

        try {
            const doc = new jsPDFLib();
            const pageWidth = doc.internal.pageSize.getWidth();
            let pageIndex = 0;

            itensSelecionados.forEach(it => {
                for (let u = 1; u <= it.qtd; u++) {
                    if (pageIndex > 0) doc.addPage();
                    pageIndex++;

                    // Cabe√ßalho centralizado
                    doc.setFontSize(14);
                    const marca = 'RuaRoma Sunset';
                    const marcaW = doc.getTextWidth(marca);
                    doc.text(marca, (pageWidth - marcaW) / 2, 28);

                    // "VALE" em destaque centralizado
                    doc.setFontSize(56);
                    try { doc.setFont(undefined, 'bold'); } catch(_) {}
                    const valeText = 'VALE';
                    const valeW = doc.getTextWidth(valeText);
                    doc.text(valeText, (pageWidth - valeW) / 2, 88);

                    // Texto do vale - por unidade (ex: "Vale 1x Calabresa")
                    // Aumentado para ter mais destaque (tamanho grande e em negrito)
                    const textoVale = `Vale 1x ${it.nomeItem}`;
                    doc.setFontSize( FortyOrMore = 40 ); // placeholder to keep line visible in editor
                    // Ajuste correto abaixo:
                    doc.setFontSize(40);
                    try { doc.setFont(undefined, 'bold'); } catch(_) {}
                    const textoW = doc.getTextWidth(textoVale);
                    doc.text(textoVale, (pageWidth - textoW) / 2, 122);

                    // Informa√ß√£o extra: √≠ndice da unidade, senha e data
                    doc.setFontSize(10);
                    try { doc.setFont(undefined, 'normal'); } catch(_) {}
                    doc.text(`Unidade: ${u} de ${it.qtd}`, 20, 150);
                    doc.text(`Senha: ${senha}`, 20, 160);
                    doc.text(`Emitido: ${new Date().toLocaleString('pt-BR')}`, 20, 170);
                }
            });

            const filename = `vales-${senha}.pdf`;
            doc.save(filename);
            alert(`PDF gerado com ${pageIndex} p√°gina(s): ${filename}`);
        } catch (err) {
            console.error('Erro ao gerar PDF:', err);
            alert('Erro ao gerar PDF. Veja o console para detalhes.');
        }
    });
});
    </script>
>>>>>>> Stashed changes
</body>
</html>